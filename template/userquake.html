<div class="border rounded bg-white" data-userquake-id="{{ .ObjectID }}">
  <div class="px-2 py-1 bg-slate-100 border-b border-slate-100 flex justify-between items-center">
    <h3 class="flex gap-1 items-center text-lg font-bold">
      <img src="./static/images/userquake.svg" class="h-4 w-4" />
      <span> 「揺れた！」<span class="text-xs">（地震感知情報）</span> </span>
    </h3>
    <div class="text-sm">{{ .ShortTime }}</div>
  </div>
  <div class="p-2">
    <a href="https://cdn.p2pquake.net/app/web/userquake?id={{ .ObjectID }}&suffix=_trim" class="timeline-image-link">
      <img src="https://cdn.p2pquake.net/app/web/userquake?id={{ .ObjectID }}&suffix=_trim"
        class="timeline-image w-full min-h-32 max-h-64 object-contain" loading="lazy" />
    </a>
  </div>

  {{/* Timeline Controls */}}
  <div class="p-2 border-t bg-gray-50 flex flex-col gap-2 md:gap-4 md:flex-row md:items-center">
    <div class="flex items-center gap-2">
      <button class="timeline-play-btn px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600"
        data-playing="false">
        ▶ 再生
      </button>
      <span class="text-sm text-gray-600">
        速度: <select class="timeline-speed-select text-sm border rounded px-1">
          <option value="0.5">0.5x</option>
          <option value="1">1x</option>
          <option value="1.5">1.5x</option>
          <option value="2">2x</option>
          <option value="3">3x</option>
          <option value="5" selected>5x</option>
          <option value="10">10x</option>
          <option value="20">20x</option>
          <option value="30">30x</option>
        </select>
      </span>
    </div>
    <div class="flex items-center gap-2 md:flex-grow">
      <input type="range" class="timeline-slider flex-1" min="0" max="100" value="100" />
      <span class="timeline-current-time text-sm font-mono w-20 text-right">--:--:--</span>
    </div>
  </div>

  <div class="p-2 flex gap-2">
    <div class="font-bold">日時</div>
    <div class="timeline-time-display">{{ .StartTime }}～{{ .EndTime }}</div>
  </div>
  <div class="p-2 grid grid-cols-[2rem_minmax(0,_1fr)] gap-1 timeline-confidence-display">
    <div class="font-bold col-span-2">各地域の相対的な信頼度</div>
    {{ range $_, $s := .AreaByConfidence }}
    <div><span class="text-sm x-confidence x-confidence-{{ $s.Confidence }}">{{ $s.Confidence }}</span></div>
    <div class="text-sm py-0.5">{{ range $i, $a := $s.Areas }} {{ if gt $i 0 }}、{{ end }}{{ $a }} {{ end }}</div>
    {{ end }}
    <div class="text-xs col-span-2">
      信頼度は揺れの強さを示すものではありません。「相対的な差」「分布の拡がり」に着目してご覧ください。
    </div>
  </div>
</div>

<script>
  initUserquakeTimeline('{{ .ObjectID }}');
</script>